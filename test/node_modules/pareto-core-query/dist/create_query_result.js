"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.__create_query_result = __create_query_result;
const _pinternals = __importStar(require("pareto-core-internals"));
class Query_Result_Class {
    constructor(executer) {
        this.executer = executer;
        this.query_result = null;
    }
    transform_result(transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                on_result(transformer($));
            }, on_error);
        });
    }
    deprecated_transform_error(error_transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(on_result, ($) => {
                on_error(error_transformer($));
            });
        });
    }
    query_without_error_transformation(queryer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                queryer($).__extract_data(on_result, on_error);
            }, on_error);
        });
    }
    query(queryer, error_transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                queryer($).__extract_data(on_result, (queryer_error) => {
                    on_error(error_transformer(queryer_error));
                });
            }, on_error);
        });
    }
    refine_without_error_transformation(callback) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                _pinternals.deprecated_create_refinement_context((abort) => callback($, abort)).__extract_data(on_result, on_error);
            }, on_error);
        });
    }
    refine(callback, error_transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(($) => {
                _pinternals.deprecated_create_refinement_context((abort) => callback($, abort)).__extract_data(on_result, (stager_error) => {
                    on_error(error_transformer(stager_error));
                });
            }, on_error);
        });
    }
    rework_error_temp(error_reworker, rework_error_transformer) {
        return new Query_Result_Class((on_result, on_error) => {
            this.executer(on_result, ($) => {
                error_reworker($).__extract_data((new_target_error) => {
                    on_error(new_target_error);
                }, (rework_error) => {
                    on_error(rework_error_transformer(rework_error));
                });
            });
        });
    }
    __extract_data(on_result, on_error) {
        this.executer(on_result, on_error);
    }
}
function __create_query_result(executer) {
    return new Query_Result_Class(executer);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlX3F1ZXJ5X3Jlc3VsdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVfcXVlcnlfcmVzdWx0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErSkEsc0RBS0M7QUFuS0QsbUVBQW9EO0FBcUJwRCxNQUFNLGtCQUFrQjtJQUVwQixZQUFZLFFBQWlDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFBO0lBQzVCLENBQUM7SUFLRCxnQkFBZ0IsQ0FDWixXQUFnRDtRQUVoRCxPQUFPLElBQUksa0JBQWtCLENBQW9CLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQ3JFLElBQUksQ0FBQyxRQUFRLENBQ1QsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDRixTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDN0IsQ0FBQyxFQUNELFFBQVEsQ0FDWCxDQUFBO1FBQ0wsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsMEJBQTBCLENBQ3RCLGlCQUFvRDtRQUVwRCxPQUFPLElBQUksa0JBQWtCLENBQW9CLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQ3JFLElBQUksQ0FBQyxRQUFRLENBQ1QsU0FBUyxFQUNULENBQUMsQ0FBQyxFQUFFLEVBQUU7Z0JBQ0YsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDbEMsQ0FBQyxDQUNKLENBQUE7UUFDTCxDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFFRCxrQ0FBa0MsQ0FDOUIsT0FBMkM7UUFFM0MsT0FBTyxJQUFJLGtCQUFrQixDQUFvQixDQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUUsRUFBRTtZQUNyRSxJQUFJLENBQUMsUUFBUSxDQUNULENBQUMsQ0FBQyxFQUFFLEVBQUU7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